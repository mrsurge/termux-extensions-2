<!-- Extension Template: Network Tools -->
<div class="nt-root">
  <div class="nt-h-tabs">
    <button class="nt-tab active" data-tab="zenmap">Zenmap</button>
    <button class="nt-tab" data-tab="pfwd">Port Forwarding</button>
    <button class="nt-tab" data-tab="tools">Net Tools</button>
    <button class="nt-tab" data-tab="ifcfg">Ifconfig</button>
  </div>

  <!-- Zenmap Profile -->
  <div class="nt-panel" data-profile="zenmap">
    <div class="nt-side">
      <div class="nt-v-tabs">
        <button class="nt-vtab active" data-vtab="scan">Scan</button>
        <button class="nt-vtab" data-vtab="topology">Topology</button>
      </div>
      <!-- Sub margin under vertical tabs: controls -->
      <div class="nt-controls">
        <label>Target
          <input id="z-target" class="nt-input mono" placeholder="e.g. 192.168.1.0/24" />
        </label>
        <label>Flags
          <input id="z-flags" class="nt-input mono" placeholder="e.g. -T4 -A" value="-T4 -A" />
        </label>
        <div class="nt-row">
          <button id="z-scan-btn" class="nt-btn nt-primary" title="Run Nmap with flags on target" aria-label="Run Zenmap Scan">Run Zenmap</button>
          <button id="z-pick-target-btn" class="nt-btn" title="Pick target from interfaces">Pick Target</button>
        </div>
        <div id="z-target-picker" class="z-picker" style="display:none;"></div>
      </div>
    </div>
    <div class="nt-main">
      <!-- Scan subtab -->
      <div class="nt-subpanel" data-subtab="scan" style="display: block;">
        <div id="z-status" class="nt-status"></div>
        <div class="nt-output">
          <div class="nt-output-title">Raw XML Output</div>
          <pre id="z-raw-output" class="mono nt-pre"></pre>
        </div>
      </div>

      <!-- Topology subtab -->
      <div class="nt-subpanel" id="z-topology" data-subtab="topology" style="display: none;">
        <div class="nt-topology">
          <div id="z-graph" class="nt-graph"></div>
          <div id="z-details" class="nt-details">
            <div class="nt-muted">Run a scan, then select a node.</div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Port Forwarding Profile (placeholder) -->
  <div class="nt-panel" data-profile="pfwd" style="display: none;">
    <div class="nt-empty">
      <div class="nt-muted">Port Forwarding is not implemented yet.</div>
    </div>
  </div>

  <!-- Net Tools Profile -->
  <div class="nt-panel" data-profile="tools" style="display: none;">
    <div class="nt-body" style="width: 100%;">
      <div class="nt-form">
        <label>Tool
          <select id="nt-tool" class="nt-input">
            <option value="ping">ping</option>
            <option value="traceroute">traceroute</option>
          </select>
        </label>
        <label>Target
          <input id="nt-target" class="nt-input mono" placeholder="e.g. 8.8.8.8" />
        </label>
        <button id="nt-run-btn" class="nt-btn">Run</button>
      </div>
      <div class="nt-output">
        <div class="nt-output-title">Output</div>
        <pre id="nt-output" class="mono nt-pre"></pre>
      </div>
    </div>
  </div>

  <!-- Ifconfig Profile -->
  <div class="nt-panel" data-profile="ifcfg" style="display: none;">
    <div class="nt-body" style="width: 100%;">
      <div class="nt-form">
        <button id="ifcfg-refresh-btn" class="nt-btn nt-primary">Refresh</button>
        <button id="ifcfg-save-btn" class="nt-btn">Save Variables</button>
        <button id="ifcfg-preview-toggle" class="nt-btn">Show Preview</button>
      </div>
      <div id="ifcfg-list" class="ifcfg-list"></div>
      <div id="ifcfg-var-wrap" class="nt-output" style="margin-top: 8px; display:none;">
        <div class="nt-output-title">Variable Preview</div>
        <pre id="ifcfg-var-preview" class="mono nt-pre"></pre>
      </div>
    </div>
    <style>
      .ifcfg-list { display: flex; flex-direction: column; gap: 8px; }
      .ifcfg-card { border: 1px solid var(--border); background: var(--card); border-radius: 6px; padding: 8px; }
      .ifcfg-header { display: flex; align-items: center; gap: 8px; cursor: pointer; }
      .ifcfg-name { font-weight: 600; }
      .ifcfg-status { width: 8px; height: 8px; border-radius: 50%; display: inline-block; }
      .ifcfg-up { background: var(--success); }
      .ifcfg-down { background: var(--destructive); }
      .ifcfg-body { margin-top: 6px; display: none; }
      .ifcfg-row { display: flex; gap: 12px; align-items: center; flex-wrap: wrap; }
      .ifcfg-label-input { background: none; color: var(--foreground); border: 1px solid var(--border); border-radius: 6px; padding: 4px 8px; }
      .kv { display: grid; grid-template-columns: auto 1fr; gap: 4px 12px; }
      .kv .k { color: var(--muted-foreground); }
      .chip { border: 1px solid var(--border); padding: 2px 6px; border-radius: 9999px; font-family: 'JetBrains Mono', monospace; }
    </style>
  </div>

  <!-- Global Clear button (bottom-left of the extension frame) -->
  <div class="nt-clear-global">
    <button id="z-clear-btn" class="nt-btn nt-clear-float" title="Clear output">Clear</button>
  </div>

  <style>
    .mono { font-family: 'JetBrains Mono', monospace; }
    .nt-root { display: flex; flex-direction: column; gap: 12px; }
    .nt-h-tabs { display: flex; gap: 8px; border-bottom: 1px solid var(--border); padding-bottom: 6px; }
    .nt-tab { background: none; border: 1px solid var(--border); color: var(--muted-foreground); padding: 6px 10px; border-radius: 6px; cursor: pointer; }
    .nt-tab.active { background: var(--secondary); color: var(--foreground); border-color: var(--accent); }
    .nt-panel { gap: 12px; }
    .nt-panel[data-profile="zenmap"] { display: grid; grid-template-columns: minmax(220px, auto) 1fr; align-items: start; }
    .nt-side { display: flex; flex-direction: column; gap: 10px; max-width: 360px; }
    .nt-v-tabs { display: flex; flex-direction: column; gap: 6px; align-items: flex-start; }
    .nt-vtab { background: none; border: 1px solid var(--border); color: var(--muted-foreground); padding: 4px 8px; border-radius: 6px; cursor: pointer; text-align: left; width: auto; max-width: 96px; font-size: 0.9em; }
    .nt-vtab.active { background: var(--secondary); color: var(--foreground); border-color: var(--accent); }
    .nt-controls { display: flex; flex-direction: column; gap: 8px; }
    .nt-controls .nt-input { width: auto; box-sizing: border-box; }
    /* Compact widths for Target and Flags */
    #z-target { width: 20ch; max-width: 100%; }
    #z-flags { width: 180px; max-width: 100%; }
    .nt-row { display: flex; gap: 8px; align-items: center; flex-wrap: wrap; }
    /* Target picker */
    .z-picker { border: 1px solid var(--border); border-radius: 6px; background: var(--card); padding: 6px; max-height: 240px; overflow: auto; }
    .zp-group { margin: 6px 0; }
    .zp-title { font-weight: 600; color: var(--muted-foreground); margin-bottom: 4px; }
    .zp-item { display: flex; gap: 8px; align-items: center; padding: 6px; border-radius: 4px; cursor: pointer; }
    .zp-item:hover { background: var(--secondary); }
    .zp-ip { font-family: 'JetBrains Mono', monospace; }
    .zp-chip { border: 1px solid var(--border); border-radius: 999px; padding: 0 6px; font-size: 0.85em; color: var(--muted-foreground); }
    .zp-btn { cursor: pointer; margin-left: 6px; }
    .zp-btn:hover { background: var(--muted); color: var(--foreground); }
    .nt-main { display: block; min-height: 320px; overflow: auto; max-width: 100%; position: relative; }
    .nt-clear-global { position: sticky; bottom: 8px; left: 0; display: inline-block; }
    .nt-clear-float { background: var(--secondary); }
    .nt-subpanel { width: 100%; }
    .nt-form { display: flex; flex-wrap: wrap; gap: 8px 12px; align-items: center; margin-bottom: 8px; }
    .nt-zenmap-toolbar { display: flex; flex-wrap: wrap; gap: 8px 12px; align-items: center; margin-bottom: 8px; position: sticky; top: 0; background: var(--card); z-index: 1; padding-top: 4px; }
    .nt-input { background: none; color: var(--foreground); border: 1px solid var(--border); border-radius: 6px; padding: 8px 10px; }
    .nt-btn { background: none; border: 1px solid var(--border); color: var(--muted-foreground); padding: 8px 12px; border-radius: 6px; cursor: pointer; font-weight: 600; }
    .nt-btn:hover { background: var(--secondary); color: var(--foreground); }
    .nt-primary { border-color: var(--accent); color: var(--foreground); background: var(--secondary); }
    .nt-primary:hover { background: var(--accent); color: var(--primary-foreground); border-color: var(--accent); }
    .nt-status { color: var(--muted-foreground); margin: 6px 0; }
    .nt-output { border: 1px solid var(--border); border-radius: 6px; background: var(--card); }
    .nt-output-title { color: var(--muted-foreground); padding: 8px 10px; border-bottom: 1px solid var(--border); }
    .nt-pre { margin: 0; padding: 10px; max-height: 320px; overflow: auto; white-space: pre-wrap; }
    .nt-topology { display: grid; grid-template-columns: minmax(200px, 2fr) minmax(160px, 1fr); gap: 12px; }
    .nt-graph { border: 1px solid var(--border); border-radius: 6px; background: var(--card); min-height: 320px; }
    .nt-details { border: 1px solid var(--border); border-radius: 6px; background: var(--card); padding: 8px; }
    .detail-title { font-weight: 600; }
    .detail-sub { color: var(--muted-foreground); margin-bottom: 8px; }
    .detail-heading { font-size: 0.9em; color: var(--muted-foreground); margin: 8px 0 6px; }
    .port-row { display: flex; gap: 8px; padding: 4px 0; border-bottom: 1px dashed var(--border); }
    .port-row:last-child { border-bottom: none; }
    .muted, .nt-muted { color: var(--muted-foreground); }
    .nt-empty { display: flex; align-items: center; justify-content: center; width: 100%; min-height: 120px; border: 1px dashed var(--border); border-radius: 6px; }
  </style>
</div>
